---
import { FaSun, FaMoon } from "react-icons/fa";
---

<div class="theme-switcher">
  <input id="theme-switcher" data-theme-switcher type="checkbox" checked />
  <label for="theme-switcher">
    <span class="sr-only">theme switcher</span>
    <span class="icon light"><FaSun /></span>
    <span class="icon dark"><FaMoon /></span>
  </label>
</div>

<script is:inline>
  // Default to dark theme
  if (!localStorage.getItem("theme")) {
    localStorage.setItem("theme", "dark");
    document.documentElement.setAttribute("data-theme", "dark");
  }

  // Get theme from localStorage
  const getTheme = () => localStorage.getItem("theme") || "dark";

  // Set theme
  const setTheme = (theme) => {
    localStorage.setItem("theme", theme);
    document.documentElement.setAttribute("data-theme", theme);
  };

  // Initialize theme
  setTheme(getTheme());

  // Handle theme switch
  document.addEventListener("DOMContentLoaded", () => {
    const switcher = document.querySelector("[data-theme-switcher]");
    if (switcher) {
      switcher.checked = getTheme() === "dark";
      switcher.addEventListener("change", (e) => {
        setTheme(e.target.checked ? "dark" : "light");
      });
    }
  });
</script>

<style>
  .theme-switcher {
    @apply inline-flex;
  }

  .theme-switcher input {
    @apply hidden;
  }

  .theme-switcher label {
    @apply relative inline-flex h-8 w-14 cursor-pointer items-center rounded-full bg-gray-200 p-1 dark:bg-gray-700;
  }

  .theme-switcher label .icon {
    @apply flex h-6 w-6 items-center justify-center rounded-full bg-white text-gray-900 transition-all duration-200 dark:bg-gray-800 dark:text-white;
  }

  .theme-switcher label .icon.dark {
    @apply -translate-x-full opacity-0;
  }

  .theme-switcher input:checked + label .icon.light {
    @apply translate-x-full opacity-0;
  }

  .theme-switcher input:checked + label .icon.dark {
    @apply translate-x-0 opacity-100;
  }
</style>
