---
import Base from "@/layouts/Base.astro";
import { markdownify } from "@/lib/utils/textConverter";
import { getEntryBySlug } from "astro:content";

// Get homepage data with fallback values
const homepage = await getEntryBySlug("homepage", "index");
const { banner = {}, feature = {} } = homepage?.data || {};
---

<Base>
  <!-- Banner -->
  <section class="section pt-14">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-7 md:col-9 mb-8 text-center">
          <h1 class="mb-4 text-h3 lg:text-h1">
            {banner.title || "St. Augustine Film Society"}
          </h1>
          <p class="mb-8">
            {banner.content || "Join us in celebrating the art of cinema. We screen carefully curated films, host discussions, and build a community of film enthusiasts."}
          </p>
          {banner.button?.enable && (
            <a class="btn btn-primary" href={banner.button.link}>
              {banner.button.label}
            </a>
          )}
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  {feature.title && (
    <section class="section">
      <div class="container">
        <h2 class="text-center mb-8">{feature.title}</h2>
        <div class="row justify-center">
          {feature.features?.map((item) => (
            <div class="md:col-6 lg:col-4 mb-8">
              <div class="bg-theme-light rounded-lg p-8 text-center">
                <h3 class="h4 mb-4">{item.title}</h3>
                <p class="mb-4">{item.content}</p>
                {item.button?.enable && (
                  <a class="btn btn-primary" href={item.button.link}>
                    {item.button.label}
                  </a>
                )}
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}
</Base>
